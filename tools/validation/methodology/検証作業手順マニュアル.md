# 検証作業手順マニュアル

## 目的
開発者の技術的主張や判断を検証するための標準的な手順を提供する。

## 前提条件
- Node.js環境
- JSDOMなどのテストツール
- 検証対象のソースコード

## 検証の具体的手順

### ステップ1: 検証環境の準備

```bash
# 検証用ディレクトリの作成
mkdir test-framework-migration-check
cd test-framework-migration-check

# 必要なファイルのコピー
cp -r [対象ディレクトリ] .

# 依存関係のインストール
cd test-framework/test-framework-v0.1-minimal
npm install
```

### ステップ2: 主張の分析と検証計画

1. **主張の文書化**
   ```markdown
   ## 検証対象の主張
   1. [具体的な主張1]
   2. [具体的な主張2]
   ...
   ```

2. **検証方法の設計**
   ```markdown
   ## 主張1の検証方法
   - 何を確認するか
   - どのようなテストコードを書くか
   - 期待される結果
   ```

### ステップ3: 検証コードの作成

#### 基本テンプレート
```javascript
import { JSDOM } from 'jsdom';
import fs from 'fs';

console.log('=== [検証名] ===\\n');

// HTMLを読み込む
const html = fs.readFileSync('./[target].html', 'utf8');
const dom = new JSDOM(html, { runScripts: 'dangerously' });
const window = dom.window;
const document = window.document;

// テスト実行
setTimeout(() => {
    console.log('1. 初期状態:');
    // 検証コード
    
    console.log('\\n=== 結果 ===');
    // 結論
}, 100);
```

### ステップ4: 検証の実行とログ収集

```bash
# テストの実行
node test-[検証名].js > test-[検証名].log 2>&1

# ログの確認
cat test-[検証名].log
```

### ステップ5: エビデンスの整理

1. **実行結果の記録**
   - コンソール出力
   - エラーメッセージ
   - 状態変化

2. **スクリーンショット**（必要な場合）
   - DOM変更前後
   - エラー画面

3. **コードスニペット**
   - 重要な部分のコード
   - 実行したコマンド

### ステップ6: 結果の文書化

```markdown
## 検証結果

### 主張: [具体的な主張]

**検証方法**:
[どのように検証したか]

**結果**:
```
[実際の出力]
```

**結論**: ✅ 正しい / ❌ 誤り / ⚠️ 部分的に正しい

**根拠**:
[なぜその結論に至ったか]
```

## チェックリスト

### 検証前
- [ ] 主張を明確に文書化したか
- [ ] 検証環境を独立して作成したか
- [ ] 必要な依存関係をインストールしたか

### 検証中
- [ ] 最小限のコードで問題を再現したか
- [ ] 複数の方法で検証したか
- [ ] ログを適切に出力したか

### 検証後
- [ ] すべての結果を記録したか
- [ ] エビデンスを保存したか
- [ ] 結論を明確に述べたか
- [ ] 今後の参考になる形で文書化したか

## よくある落とし穴

1. **環境依存の問題**
   - package.jsonの設定（type: "module"など）
   - Node.jsのバージョン
   - 依存ライブラリのバージョン

2. **非同期処理の扱い**
   - DOMContentLoadedイベント
   - setTimeoutの必要性
   - Promiseの解決待ち

3. **ログの見落とし**
   - stderrへの出力
   - 警告メッセージ
   - デバッグ情報

## 検証の心構え

1. **中立的な立場**
   - 「動作しないはず」という先入観を持たない
   - 実際の動作を素直に観察する

2. **徹底的な調査**
   - 表面的な結果だけでなく、原因も探る
   - なぜその主張がされたのか背景を理解する

3. **再現性の確保**
   - 他の人が同じ検証を実行できるようにする
   - すべての手順を記録する

---
最終更新: 2025-07-31
バージョン: 1.0