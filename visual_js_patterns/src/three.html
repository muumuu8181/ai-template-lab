<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three.js „Éá„É¢ - Visual JS Patterns</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            overflow: hidden;
        }

        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .controls {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(26, 26, 46, 0.9);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            z-index: 100;
        }

        .controls h2 {
            margin-bottom: 15px;
            color: #4facfe;
        }

        .control-group {
            margin-bottom: 15px;
        }

        .control-group label {
            display: block;
            margin-bottom: 5px;
            color: #a0a0a0;
            font-size: 14px;
        }

        input[type="range"] {
            width: 200px;
            height: 6px;
            background: #333;
            outline: none;
            border-radius: 3px;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: #4facfe;
            border-radius: 50%;
            cursor: pointer;
        }

        button {
            background: linear-gradient(45deg, #00f2fe, #4facfe);
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            margin-right: 10px;
            transition: all 0.3s ease;
        }

        button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(79, 172, 254, 0.4);
        }

        .back-button {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(26, 26, 46, 0.9);
            padding: 10px 20px;
            border-radius: 25px;
            text-decoration: none;
            color: #4facfe;
            transition: all 0.3s ease;
            z-index: 100;
        }

        .back-button:hover {
            transform: scale(1.05);
            background: rgba(79, 172, 254, 0.2);
        }

        .info {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(26, 26, 46, 0.9);
            padding: 15px;
            border-radius: 10px;
            font-size: 14px;
            color: #a0a0a0;
            z-index: 100;
        }

        .log-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #4facfe;
            color: #000;
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .log-panel {
            position: fixed;
            right: -400px;
            top: 0;
            width: 400px;
            height: 100vh;
            background: rgba(15, 15, 15, 0.95);
            border-left: 2px solid #4facfe;
            transition: right 0.3s ease;
            z-index: 999;
            overflow-y: auto;
            padding: 20px;
        }

        .log-panel.active {
            right: 0;
        }

        .log-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #333;
        }

        .log-entries {
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.6;
        }

        .log-entry {
            margin-bottom: 8px;
            padding: 8px;
            background: rgba(79, 172, 254, 0.1);
            border-radius: 4px;
            border-left: 3px solid #4facfe;
        }

        .version-display {
            position: fixed;
            top: 20px;
            right: 80px;
            background: rgba(26, 26, 46, 0.9);
            color: #4facfe;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            border: 1px solid rgba(79, 172, 254, 0.3);
            z-index: 1000;
            backdrop-filter: blur(10px);
        }
    </style>
</head>
<body>
    <div class="version-display">v0.5</div>
    <div id="canvas-container"></div>

    <div class="controls">
        <h2>Three.js „Ç≥„É≥„Éà„É≠„Éº„É´</h2>
        
        <div class="control-group">
            <label>ÂõûËª¢ÈÄüÂ∫¶</label>
            <input type="range" id="speed" min="0" max="5" step="0.1" value="1">
        </div>

        <div class="control-group">
            <label>Á´ã‰Ωì„Çµ„Ç§„Ç∫</label>
            <input type="range" id="size" min="0.5" max="3" step="0.1" value="1">
        </div>

        <div class="control-group">
            <button onclick="changeShape('cube')">Á´ãÊñπ‰Ωì</button>
            <button onclick="changeShape('sphere')">ÁêÉ‰Ωì</button>
            <button onclick="changeShape('torus')">„Éà„Éº„É©„Çπ</button>
        </div>

        <div class="control-group">
            <button onclick="toggleWireframe()">„ÉØ„Ç§„É§„Éº„Éï„É¨„Éº„É†</button>
            <button onclick="randomColor()">Ëâ≤„Çí„É©„É≥„ÉÄ„É†</button>
        </div>
    </div>

    <a href="index.html" class="back-button">‚Üê Êàª„Çã</a>

    <div class="info">
        „Éû„Ç¶„Çπ„Åß„Éâ„É©„ÉÉ„Ç∞„Åó„Å¶Ë¶ñÁÇπ„ÇíÂ§âÊõ¥„Åß„Åç„Åæ„Åô
    </div>

    <button class="log-toggle" onclick="toggleLog()">üìã Êìç‰Ωú„É≠„Ç∞</button>

    <div id="log-panel" class="log-panel">
        <div class="log-header">
            <h3>üìã Êìç‰Ωú„É≠„Ç∞</h3>
            <button onclick="copyLogs()" style="background: #4facfe; color: #000; border: none; padding: 8px 16px; border-radius: 20px; cursor: pointer;">„Ç≥„Éî„Éº</button>
        </div>
        <div id="log-entries" class="log-entries"></div>
    </div>

    <script>
        // „É≠„Ç∞„Ç∑„Çπ„ÉÜ„É†
        class OperationLogger {
            constructor() {
                this.logs = [];
                this.logContainer = document.getElementById('log-entries');
                this.addLog('system', 'Three.js „Éá„É¢„ÇíËµ∑Âãï„Åó„Åæ„Åó„Åü');
            }

            addLog(action, details, type = 'info') {
                const timestamp = new Date().toLocaleTimeString('ja-JP');
                const logEntry = {
                    timestamp,
                    action,
                    details,
                    type
                };
                
                this.logs.push(logEntry);
                this.renderLog(logEntry);
            }

            renderLog(entry) {
                const logDiv = document.createElement('div');
                logDiv.className = 'log-entry';
                logDiv.innerHTML = `<span style="color: #4facfe; font-weight: bold;">[${entry.timestamp}]</span> <span style="color: #00f2fe;">${entry.action}</span> ‚Üí ${entry.details}`;
                this.logContainer.appendChild(logDiv);
                this.logContainer.scrollTop = this.logContainer.scrollHeight;
            }

            getFormattedLogs() {
                return this.logs.map(log => `[${log.timestamp}] ${log.action} ‚Üí ${log.details}`).join('\n');
            }
        }

        const logger = new OperationLogger();

        // Three.js „Çª„ÉÉ„Éà„Ç¢„ÉÉ„Éó
        let scene, camera, renderer;
        let mesh;
        let rotationSpeed = 1;
        let currentShape = 'cube';
        let isWireframe = false;

        function init() {
            // „Ç∑„Éº„É≥‰ΩúÊàê
            scene = new THREE.Scene();
            
            // „Ç´„É°„É©‰ΩúÊàê
            camera = new THREE.PerspectiveCamera(
                75,
                window.innerWidth / window.innerHeight,
                0.1,
                1000
            );
            camera.position.z = 5;

            // „É¨„É≥„ÉÄ„É©„Éº‰ΩúÊàê
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(0x0a0a0a);
            document.getElementById('canvas-container').appendChild(renderer.domElement);

            // „É©„Ç§„ÉàËøΩÂä†
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);

            const pointLight = new THREE.PointLight(0x4facfe, 1);
            pointLight.position.set(5, 5, 5);
            scene.add(pointLight);

            // ÂàùÊúüÂΩ¢Áä∂‰ΩúÊàê
            createShape('cube');

            logger.addLog('Three.js', '„Ç∑„Éº„É≥„ÅÆÂàùÊúüÂåñ„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„Åü');

            // „Éû„Ç¶„Çπ„Ç≥„É≥„Éà„É≠„Éº„É´
            let mouseX = 0, mouseY = 0;
            let isMouseDown = false;

            document.addEventListener('mousedown', () => {
                isMouseDown = true;
                logger.addLog('„Éû„Ç¶„ÇπÊìç‰Ωú', '„Éâ„É©„ÉÉ„Ç∞ÈñãÂßã');
            });

            document.addEventListener('mouseup', () => {
                isMouseDown = false;
                logger.addLog('„Éû„Ç¶„ÇπÊìç‰Ωú', '„Éâ„É©„ÉÉ„Ç∞ÁµÇ‰∫Ü');
            });

            document.addEventListener('mousemove', (event) => {
                if (!isMouseDown) return;
                mouseX = (event.clientX / window.innerWidth) * 2 - 1;
                mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
                
                camera.position.x = mouseX * 5;
                camera.position.y = mouseY * 5;
                camera.lookAt(scene.position);
            });

            // „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ÈñãÂßã
            animate();
        }

        function createShape(shape) {
            if (mesh) {
                scene.remove(mesh);
            }

            let geometry;
            switch(shape) {
                case 'cube':
                    geometry = new THREE.BoxGeometry(2, 2, 2);
                    break;
                case 'sphere':
                    geometry = new THREE.SphereGeometry(1.5, 32, 32);
                    break;
                case 'torus':
                    geometry = new THREE.TorusGeometry(1.5, 0.5, 16, 100);
                    break;
            }

            const material = new THREE.MeshPhongMaterial({
                color: 0x4facfe,
                wireframe: isWireframe
            });

            mesh = new THREE.Mesh(geometry, material);
            scene.add(mesh);
            currentShape = shape;
        }

        function animate() {
            requestAnimationFrame(animate);

            if (mesh) {
                mesh.rotation.x += 0.01 * rotationSpeed;
                mesh.rotation.y += 0.01 * rotationSpeed;
            }

            renderer.render(scene, camera);
        }

        // „Ç≥„É≥„Éà„É≠„Éº„É´Èñ¢Êï∞
        function changeShape(shape) {
            createShape(shape);
            logger.addLog('ÂΩ¢Áä∂Â§âÊõ¥', `${shape}„Å´Â§âÊõ¥„Åó„Åæ„Åó„Åü`);
        }

        function toggleWireframe() {
            isWireframe = !isWireframe;
            if (mesh) {
                mesh.material.wireframe = isWireframe;
            }
            logger.addLog('Ë°®Á§∫„É¢„Éº„Éâ', isWireframe ? '„ÉØ„Ç§„É§„Éº„Éï„É¨„Éº„É†Ë°®Á§∫' : '„ÇΩ„É™„ÉÉ„ÉâË°®Á§∫');
        }

        function randomColor() {
            if (mesh) {
                const color = new THREE.Color(Math.random(), Math.random(), Math.random());
                mesh.material.color = color;
                logger.addLog('Ëâ≤Â§âÊõ¥', `RGB(${Math.round(color.r*255)}, ${Math.round(color.g*255)}, ${Math.round(color.b*255)})`);
            }
        }

        // „Çπ„É©„Ç§„ÉÄ„Éº„Ç§„Éô„É≥„Éà
        document.getElementById('speed').addEventListener('input', (e) => {
            rotationSpeed = parseFloat(e.target.value);
            logger.addLog('ÈÄüÂ∫¶Ë™øÊï¥', `ÂõûËª¢ÈÄüÂ∫¶: ${rotationSpeed}`);
        });

        document.getElementById('size').addEventListener('input', (e) => {
            const scale = parseFloat(e.target.value);
            if (mesh) {
                mesh.scale.set(scale, scale, scale);
                logger.addLog('„Çµ„Ç§„Ç∫Ë™øÊï¥', `„Çπ„Ç±„Éº„É´: ${scale}`);
            }
        });

        // „É≠„Ç∞„Éë„Éç„É´
        function toggleLog() {
            const panel = document.getElementById('log-panel');
            panel.classList.toggle('active');
            logger.addLog('„É≠„Ç∞„Éë„Éç„É´', panel.classList.contains('active') ? 'Èñã„Åç„Åæ„Åó„Åü' : 'Èñâ„Åò„Åæ„Åó„Åü');
        }

        function copyLogs() {
            const logText = logger.getFormattedLogs();
            navigator.clipboard.writeText(logText).then(() => {
                logger.addLog('„É≠„Ç∞„Ç≥„Éî„Éº', '„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å´„Ç≥„Éî„Éº„Åó„Åæ„Åó„Åü');
            });
        }

        // „Ç¶„Ç£„É≥„Éâ„Ç¶„É™„Çµ„Ç§„Ç∫ÂØæÂøú
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // ÂàùÊúüÂåñ
        init();
    </script>
</body>
</html>